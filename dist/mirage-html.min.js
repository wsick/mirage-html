var mirage;!function(e){var t;!function(e){e.version="0.1.0"}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(t){function n(t){function n(t){return new e.Size(t.scrollWidth,t.scrollHeight)}var r,i,a,o=new e.Size(NaN,NaN),l={updateSlots:function(e){for(var n=0;n<e.length;n++){var r=e[n];t.getElementByNode(r.node)}}};return{getRoot:function(){return r},setRoot:function(n){e.Size.undef(o),r=n,n?(i=t.getElementByNode(r),a=e.draft.NewDrafter(r)):(i=null,a=null)},run:function(){var t=n(i);e.Size.isEqual(o,t)||(a(l,t),e.Size.copyTo(t,o))}}}t.NewBinder=n}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(e){function t(t,n){function r(e){var t=e.getRoot();if(!t)return null;for(var n=t;n.tree.parent;)n=n.tree.parent;return n===t?null:l.indexOf(n)>-1?null:n}function i(e){for(var t=e.slice(0),i=0;i<n.length;i++){var a=n[i],o=r(a);if(o){a.setRoot(o),l.push(o);var u=t.indexOf(o);u>-1&&t.splice(u,1)}else n.splice(i,1),i--}return t}function a(r){for(var i=0;i<r.length;i++){var a=r[i],o=e.NewBinder(t);o.setRoot(a),l.push(a),n.push(o)}}function o(e){for(var t=0;t<n.length;t++){var r=n[t],i=r.getRoot(),a=e.indexOf(i);if(a>-1){n.splice(a,1),t--,r.setRoot(null);var o=l.indexOf(i);o>-1&&l.splice(o,1)}}}var l=[];return n=n||[],{update:function(e,t){var n=i(e);a(n),o(t)}}}e.NewBinderRegistry=t}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(e){function t(e){return e.nodeType===e.ELEMENT_NODE&&!!e.getAttribute("data-layout")}function n(e,n){var r=new MutationObserver(function(e){for(var r=[],i=[],a=[],o=0;o<e.length;o++){var l=e[o];if("childList"===l.type){for(var u=0;u<l.addedNodes.length;u++){var c=l.addedNodes[u];t(c)&&r.push(c)}for(var u=0;u<l.removedNodes.length;u++){var c=l.removedNodes[u];t(c)&&i.push(c)}}else"attributes"===l.type&&(l.oldValue?t(l.target)||a.push(l.target):t(l.target)&&r.push(l.target))}(r.length>0||i.length>0||a.length>0)&&n(r,i,a)});return{start:function(){r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["data-layout"]})},stop:function(){r.disconnect()}}}e.isMirageElement=t,e.NewDOMMonitor=n}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(e){function t(){var e=[];return{track:function(t,n,r){var i=t.getAttached("html-sync-escrow");i||(i={panel:t,items:[]},t.setAttached("html-sync-escrow",i),e.push(i)),i.entries.push({node:r,index:Array.prototype.indexOf.call(n.parentElement.children,n)})},commit:function(){for(var t=0;t<e.length;t++){var n=e[t],r=n.panel,i=n.entries;r.setAttached("html-sync-escrow",void 0),i.sort(function(e,t){return e.index-t.index});for(var a=0;a<i.length;a++)r.insertChild(i[a].node,i[a].index)}}}}e.NewPanelInserter=t}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(t){function n(n,r,i){function a(e){for(var t=0;t<e.length;t++)u(e[t])}function o(e,t,n){for(var r=0;r<e.length;r++)c(e[r],!0,t,n)}function l(e,t,n){for(var r=0;r<e.length;r++)c(e[r],!1,t,n)}function u(n){if(!r.elementExists(n)&&t.isMirageElement(n)){var i=e.createNodeByType("...");r.add(n,i);for(var a=n.firstElementChild;a;a=a.nextElementSibling)u(a)}}function c(t,n,i,a){var o=r.removeElement(t);if(o){if(!n)for(var l=t.firstElementChild;l;l=l.nextElementSibling)c(l,!0,null,null);var u=o.tree.parent;u||(a.push(o),f(t,i)),u instanceof e.Panel?u.removeChild(o):o.setParent(null)}}function f(e,n){for(var i=e.firstElementChild;i;i=i.nextElementSibling)t.isMirageElement(i)?n.push(r.getNodeByElement(i)):f(i,n)}function s(t,n,i){for(var a=0;a<t.length;a++){var o=t[a],l=r.getNodeByElement(o);if(l){var u=(o.parentElement?r.getNodeByElement(o.parentElement):null)||null;u instanceof e.Panel?i.track(u,o,l):l.setParent(u),l.tree.parent||n.push(l),d(o,l,i)}}}function d(t,n,i){for(var a=t.firstElementChild,o=0;a;a=a.nextElementSibling,o++){var l=r.getNodeByElement(a);l&&!l.tree.parent&&(n instanceof e.Panel?i.track(n,a,l):l.setParent(n),d(a,l,i))}}function m(e,n,r){var u=t.NewPanelInserter(),c=[],f=[];a(e),o(r,c,f),l(n,c,f),s(e,c,u),u.commit(),i.update(c,f)}r=r||t.NewTreeTracker(),i=i||t.NewBinderRegistry(r);var g=t.NewDOMMonitor(n,m);return{start:function(){g.start()},stop:function(){g.stop()}}}t.NewTreeSynchronizer=n}(t=e.html||(e.html={}))}(mirage||(mirage={}));var mirage;!function(e){var t;!function(e){function t(){var e={},t={},n=0;return{add:function(i,a){n++;var o=n.toString();return i.setAttributeNS(r,"uid",o),a.setAttached("mirage-uid",o),e[o]=i,t[o]=a,o},removeElement:function(n){var i=n.getAttributeNS(r,"uid"),a=i?t[i]:null;return n.removeAttributeNS(r,"uid"),a&&(a.setAttached("mirage-uid",void 0),delete e[i],delete t[i]),a},elementExists:function(t){var n=t.getAttributeNS(r,"uid");return e[n]===t},getNodeByElement:function(e){var n=e.getAttributeNS(r,"uid");return t[n]},getElementByNode:function(t){var n=t.getAttached("mirage-uid");return e[n]}}}function n(e){return e.getAttached("mirage-uid")}var r="http://schemas.wsick.com/mirage/html";e.NewTreeTracker=t,e.getNodeUid=n}(t=e.html||(e.html={}))}(mirage||(mirage={}));
//# sourceMappingURL=mirage-html.min.js.map
